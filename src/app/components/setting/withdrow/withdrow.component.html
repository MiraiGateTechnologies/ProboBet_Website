<div class="withdrawal-container">
  <h2 class="withdrow"><img src=".././../../../assets/arrow.png" class="img-fluid withdrow-back" alt="..."(click)="goBack()">Withdrawal</h2>
  <div class="instructions-text">
      <strong class="instructions-heading">Please Note:</strong>
      <ul>
          <li>The bonus amount can be used to place bets across the platform and the winnings can be withdrawn.</li>
          <li>A player can use bonus amount to place bets and play games on Kheloyar.</li>
          <li>If the withdrawals are pending from the bank, it may take up to 72 banking hours for your transaction to clear.</li>
          <li>If a user only deposits and attempts to withdraw the money without placing a single bet, 100% of the amount will be withheld due to suspicious activity. If this is repeated, no withdrawal will be given to the user.</li>
      </ul>
  </div>
  <div class="withdrawal-container">
    <!-- Tab Navigation -->
    <ul class="nav nav-tabs" id="withdrawalTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active rounded-pill" id="add-account-tab" data-bs-toggle="tab" data-bs-target="#addAccount" type="button" role="tab" aria-controls="addAccount" aria-selected="true">Add Account</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link rounded-pill" id="existing-account-tab" data-bs-toggle="tab" data-bs-target="#existingAccount" type="button" role="tab" aria-controls="existingAccount" aria-selected="false">Existing Account</button>
        </li>
    </ul>

    <!-- Tab Content -->
  </div>


</div>

<div class="tab-content" id="withdrawalTabContent">
    <div class="tab-pane fade show active" id="addAccount" role="tabpanel" aria-labelledby="add-account-tab">

      <form [formGroup]="paymentForm" (ngSubmit)="onSubmit()" class="form-background">
        <!-- Your form content -->
        <div class="mb-3">
            <label for="paymentOptions" class="form-label">Payment Options</label>
            <select class="form-select" aria-label="Default select example" formControlName="paymentOptions">
                <option value="Bank" selected>Bank</option>
                <option value="UPI">UPI</option>
            </select>
        </div>

<div class="mb-3" *ngIf="paymentForm.get('paymentOptions')?.value === 'Bank'">
  <label for="holderName" class="form-label">Holder Name</label>
  <input type="text" class="form-control" id="holderName" formControlName="holderName" placeholder="Holder Name" pattern="[A-Za-z ]*"
  >
  <!-- [ngClass]="paymentForm.get('holderName')?.touched && paymentForm.get('holderName')?.hasError('required') ? 'is-invalid' : ''" required -->
    <div *ngIf="submitted && paymentForm.get('holderName')?.errors?.required" class="error-msg">Holder name is required</div>
    <div *ngIf="paymentForm.get('holderName')?.errors?.pattern" class="error-msg">Holder name should contain only alphabets</div>
  </div>
<div class="mb-3" *ngIf="paymentForm.get('paymentOptions')?.value === 'Bank'">
  <label for="BankName" class="form-label">Bank Name</label>
  <input type="text" class="form-control" id="bankName" formControlName="bankName" placeholder="Bank Name"
  >
  <!-- [ngClass]="paymentForm.get('bankName')?.touched && paymentForm.get('bankName')?.hasError('required') ? 'is-invalid' : ''" -->
    <div *ngIf=" submitted && paymentForm.get('bankName')?.errors?.required" class="error-msg">Bank name is required</div>
    <div *ngIf="paymentForm.get('bankName')?.errors?.pattern" class="error-msg">Holder name should contain only alphabets</div>
</div>
<div class="mb-3"  *ngIf="paymentForm.get('paymentOptions')?.value === 'Bank'">
  <label for="branckName" class="form-label">Branch Name</label>
  <input type="text" class="form-control" id="branchName" formControlName="branchName" placeholder="Branch Name"
  >
  <!-- [ngClass]="paymentForm.get('branchName')?.touched && paymentForm.get('branchName')?.hasError('required') ? 'is-invalid' : ''" -->
    <div *ngIf="submitted && paymentForm.get('branchName')?.errors?.required" class="error-msg">Branch name is required</div>
    <div *ngIf="paymentForm.get('branchName')?.errors?.pattern" class="error-msg">Holder name should contain only alphabets</div>
</div>
<div class="mb-3" *ngIf="paymentForm.get('paymentOptions')?.value === 'Bank'">
  <label for="accountNumber" class="form-label">Account Number</label>
  <input type="number" class="form-control" id="accountNumber" formControlName="accountNumber" placeholder="Account Number"
  >
  <!-- [ngClass]="paymentForm.get('accountNumber')?.touched && paymentForm.get('accountNumber')?.hasError('required') ? 'is-invalid' : ''" -->
  <div *ngIf="submitted && paymentForm.get('accountNumber')?.errors?.required" class="error-msg">
    Account Number is required
  </div>
  <div *ngIf="paymentForm.get('accountNumber')?.errors?.numericLength" style="color:red">
    Account Number max 16 digits..
</div>

</div>
<div class="mb-3" *ngIf="paymentForm.get('paymentOptions')?.value === 'Bank'">
  <label for="ibanNumber" class="form-label">IFSC Code</label>
  <input type="text" class="form-control" id="ibanNumber" formControlName="ifsc"  placeholder="IFSC Code">
  <div *ngIf="submitted && paymentForm.get('ifsc')?.invalid" class="error-msg">
    IFSC Number is required
  </div>
</div>

<div class="mb-3" *ngIf="paymentForm.get('paymentOptions')?.value === 'UPI'">
  <label for="ibanNumber" class="form-label">UPI ID</label>
  <input type="number" class="form-control" id="UPI" formControlName="UPI" placeholder="UPI ID">
  <div *ngIf="submitted && paymentForm.get('UPI')?.invalid" class="error-msg">
    UPI is required
  </div>
</div>
<!-- Repeat for other form fields -->

<div class="col-12 col-md-12">
  <button type="submit" class="btn withdrow-submit-btn">Submit</button>
</div>
      </form>

<!-- <div class="table-responsive withdraw-table">
  <table class="table table-dark">
    <thead>
      <tr style="white-space: nowrap;">
        <th>Account Number</th>
        <th>Holder Number</th>
        <th>IBAN/IFSC Number</th>
        <th>Bank Name</th>
        <th>Branch Name</th>
        <th>Payment Option</th>
        <th>Delete</th>

      </tr>
    </thead>
    <tbody>
      <tr>
        <td>434545455445</td>
        <td>Mark More</td>
        <td>SBIN 00012</td>
        <td>State Bank of India</td>
        <td>Indrustrial Estate</td>
        <td>Bank</td>
        <td><button class="btn btn-sm withdrow-submit-btn" style="border-radius: 5px;">Delete</button></td>
      </tr>
    </tbody>
  </table>
</div> -->

<div class="table-responsive withdraw-table">
  <table class="table table-dark" *ngFor="let transaction of accountDetails">
    <tbody>
      <tr style="white-space: nowrap;"><th>Account Number</th><td>{{ transaction.accountNumber }}</td></tr>
      <tr style="white-space: nowrap;"><th>Holder Number</th><td>{{ transaction.hodlerNumber }}</td></tr>
      <tr style="white-space: nowrap;"><th>IBAN/IFSC Number</th><td>{{ transaction.ifscCode }}</td></tr>
      <tr style="white-space: nowrap;"><th>BANK Number</th><td>{{ transaction.bankName }}</td></tr>
      <tr style="white-space: nowrap;"><th>Branch Name</th><td>{{ transaction.branchName }}</td></tr>
      <tr style="white-space: nowrap;"><th>paymentOptions</th><td>{{ transaction.paymentOptions }}</td></tr>
      <tr style="white-space: nowrap;"><th>Delete</th><td><button class="btn btn-sm withdrow-submit-btn" style="border-radius: 5px;">Delete</button></td></tr>
    </tbody>
    </table>
    </div>
</div>

    <div class="tab-pane fade" id="existingAccount" role="tabpanel" aria-labelledby="existing-account-tab">
        <div class="scroll p-2">
          <div class="existing-card" *ngFor="let item of existingAccount" [class.active-card]="activeCard === item" (click)="setActive(item)">
            <img [src]="activeCard === item ? yellowTickImage : tickImage" class="card-tick" alt="Card Status Tick">
            <p>{{item.accountName}}</p>
            <p>{{item.accountNumber}}</p>
            <p>{{item.bank}}</p>
          </div>
        </div>
        <div class="container existing-input">
          <form [formGroup]="existingAccountForm" (ngSubmit)="onSubmit()">
            <div class="mb-3">
              <label for="accountNumber" class="form-label">Account Number</label>
              <input type="number" class="form-control" id="accountNumber" formControlName="accountNumber" placeholder="Account Number">
              <div *ngIf="existingAccountForm.get('accountNumber')?.invalid && existingAccountForm.get('accountNumber')?.touched" class=" error-msg">
                Account Number is required
              </div>
            </div>
            <div class="mb-3">
              <label for="accountName" class="form-label">Holder Name</label>
              <input type="text" class="form-control" id="accountName" formControlName="accountName" placeholder="Account Name">
              <div *ngIf="existingAccountForm.get('accountName')?.invalid && existingAccountForm.get('accountName')?.touched" class="error-msg">
                Account name is required
              </div>
            </div>
            <div class="mb-3">
              <label for="amount" class="form-label">Amount</label>
              <input type="number" class="form-control" id="amount" formControlName="amount" placeholder="Amount">
              <div *ngIf="existingAccountForm.get('amount')?.invalid && existingAccountForm.get('amount')?.touched" class="error-msg">
                <div *ngIf="existingAccountForm.get('amount')?.errors?.required">
                  Amount is required
                </div>
                <div *ngIf="existingAccountForm.get('amount')?.errors?.negativeAmount">
                  Amount cannot be negative
                </div>
              </div>
            </div>

          <div class="col-12">

            <div class="row">
                <div class="col-4">
                  <button type="button" class="btn  amount-btn" (click)="setAmount('500')" [class.clicked]="isClicked500">500</button>
                </div>
                <div class="col-4">
                  <button type="button" class="btn  amount-btn" (click)="setAmount('5000')"  [class.clicked]="isClicked5000">5000</button>
                </div>
                <div class="col-4">
                  <button type="button" class="btn  amount-btn" (click)="setAmount('10000')"  [class.clicked]="isClicked10000">10000</button>
                </div>
              </div>
            <div class="row">
              <div class="col-4">
                <button type="button" class="btn  amount-btn" (click)="setAmount('200000')" [class.clicked]="isClicked200000">200000</button>
              </div>
              <div class="col-4">
                <button type="button" class="btn  amount-btn" (click)="setAmount('500000')" [class.clicked]="isClicked500000">500000</button>
              </div>
              <div class="col-4">
                <button type="button" class="btn  amount-btn"  (click)="setAmount('1000000')" [class.clicked]="isClicked1000000">1000000</button>
              </div>
          </div>
            <div class="d-grid" style="margin: 10px;">
              <button class="btn withdrow-submit-btn" type="submit">Submit</button>
            </div>

          </div>
        </form>

          <div class="table-responsive withdraw-table">
          <table class="table table-dark" *ngFor="let transaction of transactions">
            <tbody>
              <tr style="white-space: nowrap;"><th>Transaction No</th><td>{{ transaction.transactionNo }}</td></tr>
              <tr style="white-space: nowrap;"><th>Amount</th><td>{{ transaction.amount }}</td></tr>
              <tr style="white-space: nowrap;"><th>Status</th><td>{{ transaction.status }}</td></tr>
              <tr style="white-space: nowrap;"><th>Date & Time</th><td>{{ transaction.dateTime }}</td></tr>
            </tbody>
            </table>
            </div>
      </div>
